exports.id=713,exports.ids=[713],exports.modules={821:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},3777:(a,b,c)=>{"use strict";c.d(b,{A:()=>f});var d=c(21124),e=c(38301);function f({isOpen:a,onClose:b,username:c,isGuest:f=!1,onSuccess:g,onGuestAddChips:h}){let[i,j]=(0,e.useState)(100),[k,l]=(0,e.useState)(!1),m=async()=>{if(!(i<=0)&&(c||f)){l(!0);try{if(f&&h)await h(i);else if(c){let a=await fetch("/api/chips/buy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,amount:i})});if(!a.ok)throw Error("Failed to buy chips");let b=await a.json();g&&g(b.newBalance)}b()}catch(a){console.error("Failed to buy chips:",a)}finally{l(!1)}}};return a?(0,d.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black/30",onClick:b}),(0,d.jsxs)("div",{className:"bg-white rounded-2xl p-8 z-10 w-full max-w-md shadow-lg relative",children:[(0,d.jsx)("button",{onClick:b,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-xl font-bold",children:"\xd7"}),(0,d.jsx)("h2",{className:"text-2xl font-light text-gray-800 mb-6",children:"Buy Chips"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm text-gray-600 mb-3",children:"Select Amount"}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[100,500,1e3,5e3].map(a=>(0,d.jsxs)("button",{onClick:()=>j(a),className:`py-3 px-4 rounded-lg border-2 transition-colors ${i===a?"border-[#ffb5c0] bg-[#ffb5c0]/10 text-[#ffb5c0]":"border-gray-200 hover:border-gray-300"}`,children:[a," chips"]},a))})]}),(0,d.jsx)("button",{onClick:m,disabled:k||i<=0,className:"w-full py-3 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Buy"})]})]})]}):null}},21001:(a,b,c)=>{"use strict";c.d(b,{z:()=>e});var d=c(38301);function e(a,b,c){let[e,f]=(0,d.useState)(0),[g,h]=(0,d.useState)(!0),i=!a||a.startsWith("guest-");return{currentChips:e,loading:g,refetchChips:()=>{if(i&&c){f(b??0),h(!1);return}if(!a){f(0),h(!1);return}h(!0),fetch(`/api/chips/balance?username=${a}`).then(a=>a.json()).then(b=>{console.log("Fetched chips for",a,":",b.chips),f(b.chips??0)}).catch(a=>{console.error("Failed to fetch chips:",a),f(0)}).finally(()=>{h(!1)})}}}},27698:(a,b,c)=>{Promise.resolve().then(c.bind(c,36618))},36618:(a,b,c)=>{"use strict";c.d(b,{default:()=>f});var d=c(21124),e=c(57461);function f({children:a}){return(0,d.jsx)(e.SessionProvider,{children:a})}},42378:(a,b,c)=>{"use strict";var d=c(91330);c.o(d,"useRouter")&&c.d(b,{useRouter:function(){return d.useRouter}})},48512:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/annadang/Desktop/Projects/blackjack/blackjack-game/src/components/SessionProvider.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/annadang/Desktop/Projects/blackjack/blackjack-game/src/components/SessionProvider.tsx","default")},51472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g,metadata:()=>f});var d=c(75338);c(61135);var e=c(48512);let f={title:"Blackjack",description:"Play blackjack online"};function g({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{children:(0,d.jsx)(e.default,{children:a})})})}},52894:(a,b,c)=>{"use strict";c.d(b,{a:()=>e});var d=c(38301);function e(a){let[b,c]=(0,d.useState)([]),[e,f]=(0,d.useState)(!0),[g,h]=(0,d.useState)(null),[i,j]=(0,d.useState)(1),[k,l]=(0,d.useState)(1),[m,n]=(0,d.useState)(null),o=(0,d.useCallback)(async(b=1)=>{if(!a)return void f(!1);f(!0),h(null);try{let d=new URLSearchParams({username:a,limit:"10"});m&&d.append("lastKey",m);let e=await fetch(`/api/history?${d}`),f=await e.json();c(f.games||[]),l(Math.ceil((f.count??0)/10)),j(b),n(f.lastKey||null)}catch(a){console.error("Failed to fetch history:",a),h("Failed to fetch game history")}finally{f(!1)}},[a,m]);return{history:b,loading:e,error:g,currentPage:i,totalPages:k,goToPage:a=>{o(a)},saveGame:async a=>{try{(await fetch("/api/game/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&o(1)}catch(a){console.error("Failed to save game:",a)}},refetchHistory:()=>{o(i)}}}},61135:()=>{},64650:(a,b,c)=>{Promise.resolve().then(c.bind(c,48512))},75687:(a,b,c)=>{"use strict";c.d(b,{A:()=>h});var d=c(21124),e=c(38301),f=c(42378),g=c(57461);function h({chips:a,onHistoryClick:b,onBuyChipsClick:c}){let h=(0,f.useRouter)(),{data:i}=(0,g.useSession)();(0,e.useRef)(a);let[j,k]=(0,e.useState)(!1);(0,e.useRef)(null);let l=()=>h.push("/");return(0,d.jsx)("nav",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20",children:(0,d.jsxs)("div",{className:"max-w-6xl mx-auto px-3 sm:px-6 py-3 sm:py-4 flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4 md:gap-8",children:[(0,d.jsxs)("button",{onClick:l,className:"text-lg sm:text-xl md:text-2xl font-bold text-black hover:text-pink-200 transition-colors tracking-tight",children:["â™ ",(0,d.jsx)("span",{className:"hidden sm:inline",children:" Blackjack"})]}),a>=0&&(0,d.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2 rounded-full bg-gradient-to-r from-pink-500 to-pink-600",children:[(0,d.jsx)("span",{className:"text-base sm:text-xl",children:"\uD83D\uDCB0"}),(0,d.jsxs)("span",{className:`text-white text-sm sm:text-base font-semibold ${j?"animate-pulse":""}`,children:["$",a.toLocaleString()]}),c&&(0,d.jsx)("button",{onClick:c,className:"ml-1 sm:ml-2 w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full bg-white/30 hover:bg-white/40 text-white text-sm sm:text-base font-bold transition-all",children:"+"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-4",children:[(0,d.jsx)("button",{onClick:l,className:"px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm md:text-base text-black hover:text-white font-medium transition-colors",children:"Home"}),(0,d.jsx)("button",{onClick:()=>{if(b)return b();h.push("/history")},className:"px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm md:text-base text-black hover:text-white font-medium transition-colors",children:"History"}),i?(0,d.jsx)("button",{onClick:()=>(0,g.signOut)(),className:"px-3 sm:px-6 py-1.5 sm:py-2 bg-white/20 hover:bg-white/30 text-white text-xs sm:text-sm md:text-base rounded-full font-medium transition-all",children:"Logout"}):(0,d.jsx)("button",{onClick:()=>h.push("/login"),className:"px-3 sm:px-6 py-1.5 sm:py-2 bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 text-white text-xs sm:text-sm md:text-base rounded-full font-medium transition-all",children:"Login"})]})]})})}},88577:(a,b,c)=>{"use strict";c.d(b,{j:()=>e});var d=c(38301);function e(){let[a,b]=(0,d.useState)(0),[c,e]=(0,d.useState)([]),[f,g]=(0,d.useState)(!1),h=async c=>!(a<c)&&(b(a=>a-c),!0);return{guestChips:a,guestHistory:c,isLoaded:f,deductGuestChips:h,addGuestChips:async a=>{b(b=>b+a)},addGuestHistory:a=>{e(b=>[...b,a])},resetGuestData:()=>{sessionStorage.removeItem("blackjack_guest_history"),sessionStorage.removeItem("blackjack_guest_chips"),b(0),e([])}}}},91093:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))}};